<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>关系图</title>
	</head>
	<body>
	<div id="relation"  style="width: 400px;height: 600px;"></div>
<script type="text/javascript" src="js/jquery-3.3.1.js" ></script>
<script type="text/javascript" src="js/echarts.js" ></script>
<script>
var myChart = echarts.init(document.getElementById('relation'));
/*var strjson = {
	nodes:{
		"x":"20",
		"y":"12",
		"id":1,
		"label":"我的觉得",
		"size":"100px",
		"color":"red"
	},
	edges:{
		"sourceID":"sw",
		"targetID":"1"
	}
}
myChart.showLoading();
$.getJSON('strjson', function (json) {
    myChart.hideLoading();
    myChart.setOption(option = {
        title: {
            text: 'NPM Dependencies'
        },
        animationDurationUpdate: 1500,
        animationEasingUpdate: 'quinticInOut',
        series : [
            {
                type: 'graph',
                layout: 'none',
                // progressiveThreshold: 700,
                data: json.nodes.map(function (node) {
                    return {
                        x: node.x,
                        y: node.y,
                        id: node.id,
                        name: node.label,
                        symbolSize: node.size,
                        itemStyle: {
                            normal: {
                                color: node.color
                            }
                        }
                    };
                }),
                edges: json.edges.map(function (edge) {
                    return {
                        source: edge.sourceID,
                        target: edge.targetID
                    };
                }),
                label: {
                    emphasis: {
                        position: 'right',
                        show: true
                    }
                },
                roam: true,
                focusNodeAdjacency: true,
                lineStyle: {
                    normal: {
                        width: 0.5,
                        curveness: 0.3,
                        opacity: 0.7
                    }
                }
            }
        ]
    }, true);
});*/

myChart.showLoading();
    var webkitDep = {
    "type": "force",
    "categories": [//关系网类别，可以写多组
        {
            "name": "人物关系",//关系网名称
            "keyword": {},
            "base": "人物关系"
        }
    ],
    "nodes": [//展示的节点
        {
            "name": "姐姐",//节点名称
            //"value": 3,
            //"category": 0//与关系网类别索引对应，此处只有一个关系网所以这里写0
        },
        {
            "name": "妈妈",
           // "value": 1,
            //"category": 0
        },
        {
            "name": "爸爸",
            //"value": 1,
            //"category": 0
        },
        {
        	"name": "项晶",
           // "value": 1,
            //"category": 0
        }
    ],
    "links": [//节点之间连接
        {
            "source": 0,//起始节点，0表示第一个节点
            "target": 3 //目标节点，1表示与索引为1的节点进行连接
        },
        {
            "source": 0,
            "target": 2
        },
        {
        	"source": 1,
            "target": 3
        },
        {
        	"source": 2,
            "target": 3
        },
        {
            "source": 0,//起始节点，0表示第一个节点
            "target": 1 //目标节点，1表示与索引为1的节点进行连接
        }
    ]
};
myChart.hideLoading();
 
    option = {
        /*legend: {
            data: [{
            	name: '人物关系',
			    // 强制设置图形为圆。
			    icon: 'roundRect',
			    // 设置文本为红色
			    textStyle: {
			        color: 'red'
			    }
            }]//此处的数据必须和关系网类别中name相对应
        },*/
        series: [{
            type: 'graph',
            layout: 'force',
            color:"red",
            animation: false,
            label: {
                normal: {
                    show:true,
                    position: 'right'
                }
            },
            draggable: true,
            data: webkitDep.nodes.map(function (idx) {
                return idx;
            }),
            categories: webkitDep.categories,
            force: {
                edgeLength: 300,//连线的长度
                repulsion: 100  //子节点之间的间距
            },
            edges: webkitDep.links,
            lineStyle: {
            	color:"gray",
                width: 8,
                shadowColor: 'rgba(0, 0, 0, 0.5)',
                shadowBlur: 10
            },
        }]
    };
    myChart.setOption(option);

		</script>
	</body>
</html>
